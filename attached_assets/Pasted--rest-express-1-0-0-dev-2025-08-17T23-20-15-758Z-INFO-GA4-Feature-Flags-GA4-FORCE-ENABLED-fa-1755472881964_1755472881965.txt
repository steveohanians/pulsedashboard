> rest-express@1.0.0 dev
[2025-08-17T23:20:15.758Z] INFO: GA4 Feature Flags: {"GA4_FORCE_ENABLED":false,"GA4_LOCKS_ENABLED":false,"GA4_STRICT_CLIENTID_VALIDATION":false,"GA4_COMPAT_MODE":true}
[2025-08-17T23:20:15.759Z] INFO: Cleanup Route Feature Flags: {"GA4_FORCE_ENABLED":false,"GA4_STRICT_CLIENTID_VALIDATION":false,"GA4_COMPAT_MODE":true}
üöÄ [SERVER-BOOT] Server starting at: 2025-08-17T23:20:15.884Z
[2025-08-17T23:20:16.203Z] INFO: Database connection successful
11:20:16 PM [express] serving on port 5000
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
11:20:21 PM [express] GET /api/user 304 in 4496ms :: {"id":"admin-user-id","clientId":"demo-client-id‚Ä¶
[2025-08-17T23:20:21.829Z] INFO: Filters data cached: filters:All:All
11:20:22 PM [express] GET /api/server-boot-time 200 in 4930ms
[2025-08-17T23:20:22.490Z] INFO: Filters data cached: filters:All:All
11:20:22 PM [express] GET /api/server-boot-time 200 in 4444ms
11:20:22 PM [express] GET /api/filters 304 in 5517ms :: {"businessSizes":["All","Global Enterprise (5‚Ä¶
11:20:22 PM [express] GET /api/user 304 in 4576ms :: {"id":"admin-user-id","clientId":"demo-client-id‚Ä¶
11:20:23 PM [express] GET /api/filters 304 in 5668ms :: {"businessSizes":["All","Global Enterprise (5‚Ä¶
[2025-08-17T23:20:31.027Z] INFO: Cache HIT for filters: filters:All:All
11:20:31 PM [express] GET /api/user 304 in 2221ms :: {"id":"admin-user-id","clientId":"demo-client-id‚Ä¶
11:20:31 PM [express] GET /api/filters 304 in 2294ms :: {"businessSizes":["All","Global Enterprise (5‚Ä¶
11:20:31 PM [express] GET /api/server-boot-time 200 in 2366ms
11:20:50 PM [express] GET /api/user 304 in 217ms :: {"id":"admin-user-id","clientId":"demo-client-id"‚Ä¶
DEPRECATION: Time period label "Last Month" is deprecated. Use canonical TimePeriod objects instead.
[2025-08-17T23:20:51.068Z] INFO: Cache HIT for filters: filters:All:All
üéØ getDashboardDataOptimized CALLED with periods: [ '2025-07' ] timePeriod: last_month
[2025-08-17T23:20:51.141Z] INFO: üî¥ DASHBOARD FUNCTION CALLED - CLIENT: demo-client-id
Cache cleared: deleted all 0 keys
[2025-08-17T23:20:51.142Z] INFO: üöõ QUERY CACHE CLEARED - Forcing fresh CD_Avg traffic channel processing
[2025-08-17T23:20:51.214Z] INFO: Retrieved 3 insights for demo-client-id/2025-07
11:20:51 PM [express] GET /api/filters 304 in 639ms :: {"businessSizes":["All","Global Enterprise (5,‚Ä¶
[2025-08-17T23:20:51.429Z] DEBUG: getDailyClientMetrics(demo-client-id, 2025-07): 124 daily metrics found
üö® CALLING getMetricsByCompetitors for period: 2025-07
üö® COMPETITOR FETCH: demo-client-id, 2025-07
[2025-08-17T23:20:51.430Z] INFO: üîç Getting Industry_Avg metrics for period: 2025-07, filters: {"businessSize":"All","industryVertical":"All"}
üîç OPTIMIZER: About to call getFilteredCdAvgMetrics with period: 2025-07, filters: {"businessSize":"All","industryVertical":"All"}
[2025-08-17T23:20:51.431Z] INFO: üîç FUNCTION CALL: getFilteredCdAvgMetrics called with period: 2025-07, filters: {"businessSize":"All","industryVertical":"All"}
11:20:51 PM [express] GET /api/ai-insights/demo-client-id 304 in 860ms :: {"status":"available","peri‚Ä¶
üö® FOUND 3 COMPETITORS: [094c04f3-5418-4e3a-a5b5-6353890c8e4c,dcadb4fc-cea1-42da-9964-2c733bb7ffad,e9751ae8-9152-46a5-8914-4bee2e67ed26]
[2025-08-17T23:20:51.791Z] INFO: Returning 13 Industry_Avg metrics for period 2025-07
[2025-08-17T23:20:51.863Z] INFO: üîç BASELINE CHECK for period 2025-07: Checking if baseline generation needed {"existingMetricsCount":13,"existingMetricNames":["Traffic Channels","Traffic Channels","Traffic Channels","Traffic Channels","Traffic Channels","Traffic Channels","Traffic Channels","Device Distribution","Device Distribution","Bounce Rate","Session Duration","Pages per Session","Sessions per User"]}
[2025-08-17T23:20:51.863Z] INFO: Returning 13 CD_Avg metrics for period 2025-07 (13 existing + 0 generated)
üö® FALLBACK: Using period 2025-06 instead of 2025-07
üö® RAW METRICS: Found 31 metrics for period 2025-06
üîç CHECKING 31 PROCESSED METRICS FOR NULL VALUES
üîç METRIC 1: {
  name: 'Bounce Rate',
  channel: null,
  value: { value: 0.4747, source: 'semrush' },
  valueType: 'object',
  isNull: false
}
üîç METRIC 2: {
  name: 'Session Duration',
  channel: null,
  value: { value: 408, source: 'semrush' },
  valueType: 'object',
  isNull: false
}
üîç METRIC 3: {
  name: 'Pages per Session',
  channel: null,
  value: { value: 4.494, source: 'semrush' },
  valueType: 'object',
  isNull: false
}
üö® FOUND 0 NULL VALUES out of 31 total metrics
üö® FINAL: Returning 31 competitor metrics
üö® getMetricsByCompetitors returned: 31 metrics for period 2025-07
[2025-08-17T23:20:52.081Z] DEBUG: CD_AVG RAW BEFORE PROCESSING: {"count":7,"samples":[{"value":{"source":"cd_portfolio_average","sessions":401453,"percentage":58.5},"type":"object","channel":"Direct","valuePreview":{"source":"cd_portfolio_average","sessions":401453,"percentage":58.5}},{"value":{"source":"cd_portfolio_average","sessions":781,"percentage":0.3},"type":"object","channel":"Email","valuePreview":{"source":"cd_portfolio_average","sessions":781,"percentage":0.3}}]}
üö® COMPETITOR METRICS PIPELINE DEBUG: {
  rawCompetitorCount: 31,
  periodsQueried: [ '2025-07' ],
  competitorSample: [
    {
      metricName: 'Bounce Rate',
      value: [Object],
      valueType: 'object',
      valueIsNull: false,
      hasValueProp: true,
      competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad',
      timePeriod: '2025-06'
    },
    {
      metricName: 'Session Duration',
      value: [Object],
      valueType: 'object',
      valueIsNull: false,
      hasValueProp: true,
      competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad',
      timePeriod: '2025-06'
    },
    {
      metricName: 'Pages per Session',
      value: [Object],
      valueType: 'object',
      valueIsNull: false,
      hasValueProp: true,
      competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad',
      timePeriod: '2025-06'
    }
  ]
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Direct',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 401453,
    percentage: 58.5
  },
  parsedPercentage: 58.5
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Email',
  rawValue: { source: 'cd_portfolio_average', sessions: 781, percentage: 0.3 },
  parsedPercentage: 0.3
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Social Media',
  rawValue: { source: 'cd_portfolio_average', sessions: 10798, percentage: 1.7 },
  parsedPercentage: 1.7
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Paid Search',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 19651.5,
    percentage: 2.25
  },
  parsedPercentage: 2.25
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Organic Search',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 224481,
    percentage: 26.65
  },
  parsedPercentage: 26.65
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Referral',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 60161,
    percentage: 10.45
  },
  parsedPercentage: 10.45
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Display Ads',
  rawValue: { source: 'cd_portfolio_average', sessions: 3356, percentage: 0.2 },
  parsedPercentage: 0.2
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'CD_Avg',
  channel: 'Mobile',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 298312,
    percentage: 27.8734598496723
  },
  parsedPercentage: 27.8734598496723
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'CD_Avg',
  channel: 'Desktop',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 420691.5,
    percentage: 72.1265401503277
  },
  parsedPercentage: 72.1265401503277
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Industry_Avg',
  channel: '1',
  rawValue: {
    source: 'industry_average',
    sessions: 4048363,
    percentage: 33.64569160587839
  },
  parsedPercentage: 33.64569160587839
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Industry_Avg',
  channel: '0',
  rawValue: {
    source: 'industry_average',
    sessions: 7983974,
    percentage: 66.3543083941216
  },
  parsedPercentage: 66.3543083941216
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '4',
  rawValue: { source: 'industry_average', sessions: 204063, percentage: 1.7 },
  parsedPercentage: 1.7
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '5',
  rawValue: { source: 'industry_average', sessions: 17262, percentage: 0.1 },
  parsedPercentage: 0.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '6',
  rawValue: { source: 'industry_average', sessions: 38473, percentage: 0.3 },
  parsedPercentage: 0.3
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '1',
  rawValue: { source: 'industry_average', sessions: 1187204, percentage: 9.9 },
  parsedPercentage: 9.9
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '0',
  rawValue: { source: 'industry_average', sessions: 7195306, percentage: 59.8 },
  parsedPercentage: 59.8
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '2',
  rawValue: { source: 'industry_average', sessions: 3285623, percentage: 27.3 },
  parsedPercentage: 27.3
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '3',
  rawValue: { source: 'industry_average', sessions: 104406, percentage: 0.9 },
  parsedPercentage: 0.9
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Bounce Rate',
  sourceType: 'Competitor',
  rawValue: { value: 0.4747, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 0.4747,
  competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Session Duration',
  sourceType: 'Competitor',
  rawValue: { value: 408, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 408,
  competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Pages per Session',
  sourceType: 'Competitor',
  rawValue: { value: 4.494, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 4.494,
  competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Sessions per User',
  sourceType: 'Competitor',
  rawValue: { value: 1.7709546652520287, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 1.7709546652520287,
  competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad'
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Direct',
  rawValue: { source: 'semrush', sessions: 17887845, percentage: 68.8 },
  parsedPercentage: 68.8
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Referral',
  rawValue: { source: 'semrush', sessions: 2329748, percentage: 9 },
  parsedPercentage: 9
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Organic Search',
  rawValue: { source: 'semrush', sessions: 3920431, percentage: 15.1 },
  parsedPercentage: 15.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Paid Search',
  rawValue: { source: 'semrush', sessions: 1522797, percentage: 5.9 },
  parsedPercentage: 5.9
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Social Media',
  rawValue: { source: 'semrush', sessions: 293295, percentage: 1.1 },
  parsedPercentage: 1.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Display Ads',
  rawValue: { source: 'semrush', sessions: 30200, percentage: 0.1 },
  parsedPercentage: 0.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Competitor',
  channel: 'Desktop',
  rawValue: {
    source: 'semrush',
    sessions: 8175487,
    percentage: 31.461536646927957
  },
  parsedPercentage: 31.461536646927957
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Competitor',
  channel: 'Mobile',
  rawValue: {
    source: 'semrush',
    sessions: 17810170,
    percentage: 68.53846335307205
  },
  parsedPercentage: 68.53846335307205
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Bounce Rate',
  sourceType: 'Competitor',
  rawValue: { value: 0.2299, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 0.2299,
  competitorId: 'e9751ae8-9152-46a5-8914-4bee2e67ed26'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Session Duration',
  sourceType: 'Competitor',
  rawValue: { value: 199, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 199,
  competitorId: 'e9751ae8-9152-46a5-8914-4bee2e67ed26'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Pages per Session',
  sourceType: 'Competitor',
  rawValue: { value: 3.5277, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 3.5277,
  competitorId: 'e9751ae8-9152-46a5-8914-4bee2e67ed26'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Sessions per User',
  sourceType: 'Competitor',
  rawValue: { value: 1.1072100313479625, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 1.1072100313479625,
  competitorId: 'e9751ae8-9152-46a5-8914-4bee2e67ed26'
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Direct',
  rawValue: { source: 'semrush', sessions: 726, percentage: 41.1 },
  parsedPercentage: 41.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Referral',
  rawValue: { source: 'semrush', sessions: 43, percentage: 2.4 },
  parsedPercentage: 2.4
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Organic Search',
  rawValue: { source: 'semrush', sessions: 216, percentage: 12.2 },
  parsedPercentage: 12.2
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Paid Search',
  rawValue: { source: 'semrush', sessions: 709, percentage: 40.1 },
  parsedPercentage: 40.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Social Media',
  rawValue: { source: 'semrush', sessions: 72, percentage: 4.1 },
  parsedPercentage: 4.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Competitor',
  channel: 'Desktop',
  rawValue: { source: 'semrush', sessions: 1766, percentage: 100 },
  parsedPercentage: 100
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Bounce Rate',
  sourceType: 'Competitor',
  rawValue: { value: 0.7179, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 0.7179,
  competitorId: '094c04f3-5418-4e3a-a5b5-6353890c8e4c'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Session Duration',
  sourceType: 'Competitor',
  rawValue: { value: 185, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 185,
  competitorId: '094c04f3-5418-4e3a-a5b5-6353890c8e4c'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Pages per Session',
  sourceType: 'Competitor',
  rawValue: { value: 2.9516, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 2.9516,
  competitorId: '094c04f3-5418-4e3a-a5b5-6353890c8e4c'
}
üîç COMPETITOR METRIC DEBUG IN PROCESSING: {
  metricName: 'Sessions per User',
  sourceType: 'Competitor',
  rawValue: { value: 1.2955301949595817, source: 'semrush' },
  valueType: 'object',
  valueString: 'not-string',
  parsedValue: 1.2955301949595817,
  competitorId: '094c04f3-5418-4e3a-a5b5-6353890c8e4c'
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Direct',
  rawValue: { source: 'semrush', sessions: 2557, percentage: 46.9 },
  parsedPercentage: 46.9
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Referral',
  rawValue: { source: 'semrush', sessions: 2407, percentage: 44.2 },
  parsedPercentage: 44.2
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Organic Search',
  rawValue: { source: 'semrush', sessions: 427, percentage: 7.8 },
  parsedPercentage: 7.8
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Competitor',
  channel: 'Social Media',
  rawValue: { source: 'semrush', sessions: 58, percentage: 1.1 },
  parsedPercentage: 1.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Competitor',
  channel: 'Desktop',
  rawValue: { source: 'semrush', sessions: 5449, percentage: 100 },
  parsedPercentage: 100
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Industry_Avg',
  channel: '1',
  rawValue: {
    source: 'industry_average',
    sessions: 4048363,
    percentage: 33.64569160587839
  },
  parsedPercentage: 33.64569160587839
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'Industry_Avg',
  channel: '0',
  rawValue: {
    source: 'industry_average',
    sessions: 7983974,
    percentage: 66.3543083941216
  },
  parsedPercentage: 66.3543083941216
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '4',
  rawValue: { source: 'industry_average', sessions: 204063, percentage: 1.7 },
  parsedPercentage: 1.7
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '5',
  rawValue: { source: 'industry_average', sessions: 17262, percentage: 0.1 },
  parsedPercentage: 0.1
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '6',
  rawValue: { source: 'industry_average', sessions: 38473, percentage: 0.3 },
  parsedPercentage: 0.3
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '1',
  rawValue: { source: 'industry_average', sessions: 1187204, percentage: 9.9 },
  parsedPercentage: 9.9
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '0',
  rawValue: { source: 'industry_average', sessions: 7195306, percentage: 59.8 },
  parsedPercentage: 59.8
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '2',
  rawValue: { source: 'industry_average', sessions: 3285623, percentage: 27.3 },
  parsedPercentage: 27.3
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'Industry_Avg',
  channel: '3',
  rawValue: { source: 'industry_average', sessions: 104406, percentage: 0.9 },
  parsedPercentage: 0.9
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Direct',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 401453,
    percentage: 58.5
  },
  parsedPercentage: 58.5
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Email',
  rawValue: { source: 'cd_portfolio_average', sessions: 781, percentage: 0.3 },
  parsedPercentage: 0.3
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Social Media',
  rawValue: { source: 'cd_portfolio_average', sessions: 10798, percentage: 1.7 },
  parsedPercentage: 1.7
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Paid Search',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 19651.5,
    percentage: 2.25
  },
  parsedPercentage: 2.25
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Organic Search',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 224481,
    percentage: 26.65
  },
  parsedPercentage: 26.65
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Referral',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 60161,
    percentage: 10.45
  },
  parsedPercentage: 10.45
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Traffic Channels',
  sourceType: 'CD_Avg',
  channel: 'Display Ads',
  rawValue: { source: 'cd_portfolio_average', sessions: 3356, percentage: 0.2 },
  parsedPercentage: 0.2
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'CD_Avg',
  channel: 'Mobile',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 298312,
    percentage: 27.8734598496723
  },
  parsedPercentage: 27.8734598496723
}
üîç PARSE SUCCESS - Device Distribution: {
  metricName: 'Device Distribution',
  sourceType: 'CD_Avg',
  channel: 'Desktop',
  rawValue: {
    source: 'cd_portfolio_average',
    sessions: 420691.5,
    percentage: 72.1265401503277
  },
  parsedPercentage: 72.1265401503277
}
üîç COMPETITOR METRICS DEBUG AFTER PROCESSING: {
  count: 31,
  sampleValues: [
    {
      metricName: 'Bounce Rate',
      value: 0.4747,
      valueType: 'number',
      competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad',
      timePeriod: '2025-06'
    },
    {
      metricName: 'Session Duration',
      value: 408,
      valueType: 'number',
      competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad',
      timePeriod: '2025-06'
    },
    {
      metricName: 'Pages per Session',
      value: 4.494,
      valueType: 'number',
      competitorId: 'dcadb4fc-cea1-42da-9964-2c733bb7ffad',
      timePeriod: '2025-06'
    }
  ]
}
[2025-08-17T23:20:52.091Z] INFO: ‚úì Monthly data already exists for 2025-07, skipping coalescing
[2025-08-17T23:20:52.091Z] INFO: üîç TIME SERIES LOGIC: timePeriod="last_month", isLastMonth=true, shouldCreateTimeSeriesData=true, periodsCount=1
[2025-08-17T23:20:52.091Z] INFO: üîç LAST MONTH LOGIC: Actively fetching daily GA4 data for 2025-07
[2025-08-17T23:20:52.164Z] INFO: üìä DAILY GA4 FETCH SUCCESS: Found 124 daily metrics for grouping
[2025-08-17T23:20:52.164Z] INFO: üìä DAILY DATA BREAKDOWN: Total: 124, Simple metrics: 124
[2025-08-17T23:20:52.164Z] INFO:   - Bounce Rate: 31 daily records
[2025-08-17T23:20:52.164Z] INFO:   - Session Duration: 31 daily records
[2025-08-17T23:20:52.164Z] INFO:   - Pages per Session: 31 daily records
[2025-08-17T23:20:52.164Z] INFO:   - Sessions per User: 31 daily records
[2025-08-17T23:20:52.166Z] INFO: Background job enqueued: AI_INSIGHT_1755472852166_6hwjf5lnq (AI_INSIGHT)
[2025-08-17T23:20:52.166Z] INFO: Processing background job: AI_INSIGHT_1755472852166_6hwjf5lnq (AI_INSIGHT)
11:20:52 PM [express] GET /api/dashboard/demo-client-id 200 in 1606ms :: {"client":{"id":"demo-client‚Ä¶
[2025-08-17T23:20:53.553Z] ERROR: API Error Response {"code":"CLIENT_NOT_FOUND","message":"Client status not found","hint":"Verify the client ID and ensure the client exists","timestamp":"2025-08-17T23:20:53.553Z","context":{"operation":"validate_client","clientId":"status","endpoint":"/api/ga4-data/status/demo-client-id?period=2025-07"},"statusCode":404}
[2025-08-17T23:20:53.624Z] INFO: Retrieved 3 insights for demo-client-id/2025-07
11:20:53 PM [express] GET /api/ga4-data/status/demo-client-id 404 in 913ms :: {"success":false,"error‚Ä¶
11:20:53 PM [express] GET /api/ai-insights/demo-client-id 304 in 979ms :: {"status":"available","peri‚Ä¶
[2025-08-17T23:20:54.166Z] INFO: AI insight processed for demo-client-id:undefined
[2025-08-17T23:20:54.166Z] INFO: Completed background job: AI_INSIGHT_1755472852166_6hwjf5lnq
11:20:54 PM [express] GET /api/admin/users 304 in 678ms :: {"success":true,"users":[{"id":"admin-user‚Ä¶