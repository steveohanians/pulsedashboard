Here's the updated brand story scoring logic aligned with the new prompt criteria:

```javascript
// Brand Story Scoring Logic - Updated for typical B2B content

const currentYear = new Date().getFullYear();
const recentYears = [currentYear, currentYear - 1, currentYear - 2];

// Look for quantified results (more common in B2B than case studies)
const numberPattern = /(\d{1,3}[,.]?\d{0,3})\s*(%|percent|million|billion|thousand|times|x|years?|clients?|customers?|companies|projects?)/gi;
const quantifiedResults = storyContent.match(numberPattern) || [];
const hasQuantifiedOutcomes = quantifiedResults.length >= 1; // Lowered threshold

// Check for proof elements (replacing case study focus)
const proofKeywords = ['trusted by', 'working with', 'partnered with', 'clients include', 'award', 'recognized', 'certified', 'years of experience', 'founded', 'since'];
const hasProofElements = proofKeywords.some(keyword => 
  storyContent.toLowerCase().includes(keyword)
);

// Calculate score and collect evidence
let score = 0;
const passes: { passed: string[]; failed: string[] } = { passed: [], failed: [] };
const evidenceDetails: Record<string, any> = {};

// 1. Point of View (25% - 2.5 points)
if (analysis.pov_present) {
  score += 2.5;
  passes.passed.push('pov_present');
  if (analysis.pov_evidence && analysis.pov_evidence !== 'none found') {
    evidenceDetails.pov = analysis.pov_evidence;
  }
} else {
  passes.failed.push('no_clear_pov');
}

// 2. Mechanism/Approach (25% - 2.5 points)
if (analysis.mechanism_named) {
  score += 2.5;
  passes.passed.push('mechanism_described');
  if (analysis.mechanism_evidence && analysis.mechanism_evidence !== 'none found') {
    evidenceDetails.mechanism = analysis.mechanism_evidence;
  }
} else {
  passes.failed.push('no_clear_approach');
}

// 3. Outcomes Stated (25% - 2.5 points)
// Updated: outcomes_stated instead of outcomes_recent
if (analysis.outcomes_stated) {
  if (hasQuantifiedOutcomes) {
    score += 2.5;
    passes.passed.push('quantified_outcomes');
    evidenceDetails.outcomes_quantified = quantifiedResults.slice(0, 3).join(', ');
  } else {
    score += 1.75; // Partial credit for non-quantified outcomes
    passes.passed.push('outcomes_mentioned');
  }
  if (analysis.outcomes_evidence && analysis.outcomes_evidence !== 'none found') {
    evidenceDetails.outcomes = analysis.outcomes_evidence;
  }
} else {
  passes.failed.push('no_outcomes_stated');
}

// 4. Proof Elements (25% - 2.5 points)
// Replaced case_complete with proof_elements
if (analysis.proof_elements) {
  if (hasProofElements && hasQuantifiedOutcomes) {
    score += 2.5;
    passes.passed.push('strong_proof_elements');
  } else if (analysis.proof_elements || hasProofElements) {
    score += 1.75;
    passes.passed.push('some_proof_elements');
  }
  if (analysis.proof_evidence && analysis.proof_evidence !== 'none found') {
    evidenceDetails.proof = analysis.proof_evidence;
  }
} else {
  passes.failed.push('no_proof_elements');
}

// Bonus points for B2B-specific quality indicators
let bonusPoints = 0;

// Check for industry/vertical focus (common in B2B)
const industryKeywords = ['enterprise', 'B2B', 'SaaS', 'financial services', 'healthcare', 'manufacturing', 'technology'];
if (industryKeywords.some(keyword => storyContent.toLowerCase().includes(keyword))) {
  bonusPoints += 0.5;
  passes.passed.push('industry_focus');
}

// Check for capability breadth (B2B companies often list multiple capabilities)
const capabilityKeywords = ['strategy', 'consulting', 'implementation', 'support', 'solutions', 'services', 'expertise'];
const capabilityCount = capabilityKeywords.filter(keyword => 
  storyContent.toLowerCase().includes(keyword)
).length;
if (capabilityCount >= 3) {
  bonusPoints += 0.5;
  passes.passed.push('capability_breadth');
}

// Apply confidence factor and bonuses
score = (score + bonusPoints) * (analysis.confidence || 0.75);
score = Math.min(10, Math.max(0, score));

// Return scoring result
return {
  score: Math.round(score * 10) / 10,
  passes,
  evidence: evidenceDetails,
  metrics: {
    hasQuantifiedOutcomes,
    hasProofElements,
    quantifiedCount: quantifiedResults.length,
    confidence: analysis.confidence || 0.75
  }
};
```

Key changes made:
1. **Removed case study focus** - Replaced with proof_elements checking
2. **Changed outcomes_recent to outcomes_stated** - No longer requires recency
3. **Lowered quantification threshold** - From 2 to 1 (more realistic)
4. **Updated proof keywords** - Focus on typical B2B credibility markers
5. **Added B2B-specific bonuses** - Industry focus and capability breadth
6. **Adjusted scoring weights** - More forgiving partial credit
7. **Fixed evidence collection** - Checks for 'none found' string